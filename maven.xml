<?xml version="1.0"?>
<!-- Copyright (c) 2005  Dustin Sallings (dustin@spy.net) -->
<!-- arch-tag: B5129534-C0B4-11D9-821B-000393CFE6B8 -->

<project default="war"
	xmlns:j="jelly:core"
	xmlns:m="jelly:maven"
	xmlns:ant="jelly:ant"
	xmlns:deploy="deploy">

	<preGoal name="java:compile">
		<attainGoal name="spy:spt"/>
		<path id="generated.src" location="${maven.build.src}"/>
	</preGoal>

	<goal name="spy:spt">
		<mkdir dir="${maven.build.src}"/>
		<taskdef name="spgen" classname="net.spy.ant.SPGenTask"
			classpathref="maven.dependency.classpath"/>
		<spgen srcdir="${maven.src.dir}/java" destdir="${maven.build.src}"/>
		<path id="generated.src" location="${maven.build.src}"/>
		<m:addPath id="maven.compile.src.set" refid="generated.src"/>
	</goal>

</project>
