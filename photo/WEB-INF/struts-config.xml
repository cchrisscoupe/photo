<?xml version="1.0" encoding="ISO-8859-1" ?>

<!DOCTYPE struts-config PUBLIC
          "-//Apache Software Foundation//DTD Struts Configuration 1.0//EN"
          "http://jakarta.apache.org/struts/dtds/struts-config_1_0.dtd">

<struts-config>

  <form-beans>
    <form-bean name="loginForm" type="net.spy.photo.struts.LoginForm"/>
    <form-bean name="adminifyForm" type="net.spy.photo.struts.AdminifyForm"/>
    <form-bean name="searchForm" type="net.spy.photo.struts.SearchForm"/>
    <form-bean name="cursorForm" type="net.spy.photo.struts.CursorForm"/>
    <form-bean name="uploadForm" type="net.spy.photo.struts.UploadForm"/>
    <form-bean name="saveSearchForm"
			type="net.spy.photo.struts.SaveSearchForm"/>
    <form-bean name="newUserForm" type="net.spy.photo.struts.NewUserForm"/>
    <form-bean name="setSizeForm" type="net.spy.photo.struts.SetSizeForm"/>
    <form-bean name="changePWForm" type="net.spy.photo.struts.ChangePWForm"/>
    <form-bean name="forgotPWForm" type="net.spy.photo.struts.ForgotPWForm"/>
    <form-bean name="commentForm" type="net.spy.photo.struts.CommentForm"/>

		<!-- Admin beans -->
		<form-bean name="adminUserForm" type="net.spy.photo.struts.AdminUserForm"/>
		<form-bean name="adminCatForm"
			type="net.spy.photo.struts.AdminCategoryForm"/>
		<form-bean name="adminNewProfileForm"
			type="net.spy.photo.struts.AdminNewProfileForm"/>
  </form-beans>

  <action-mappings>

	<!-- Login -->
	<action    path="/login"
		type="net.spy.photo.struts.LoginAction"
		input="/credform.jsp"
		name="loginForm">
		<forward name="success" path="/index.jsp" />
		<forward name="setadmin" path="/adminify.do?action=setadmin" />
	</action>

	<!-- Logout -->
	<action    path="/logout"
		type="net.spy.photo.struts.LogoutAction">
		<forward name="success" path="/index.jsp" />
	</action>

	<!-- Change password -->
	<action    path="/changepw"
		type="net.spy.photo.struts.ChangePWAction"
		input="/changepw.jsp"
		name="changePWForm">
		<forward name="success" path="/index.jsp" />
	</action>

	<!-- Forgot password -->
	<action    path="/forgotpw"
		type="net.spy.photo.struts.ForgotPWAction"
		input="/credform.jsp"
		name="forgotPWForm">
		<forward name="success" path="/forgotpw_out.jsp" />
	</action>

  <!-- Add a new comment -->
  <action path="/addcomment"
    type="net.spy.photo.struts.CommentAction"
    input="/commentinput.jsp"
    name="commentForm">
		<forward name="success" path="/display.jsp" />
  </action>

	<!-- Enable/disable administrative access. -->
	<action path="/adminify"
		type="net.spy.photo.struts.AdminifyAction"
		name="adminifyForm">
		<forward name="success" path="/index.jsp"/>
	</action>

	<!-- Set the optimal image size. -->
	<action path="/setviewsize"
		type="net.spy.photo.struts.SetSizeAction"
		input="/sizeform.jsp"
		name="setSizeForm">
		<forward name="success" path="/index.jsp"/>
	</action>

	<!-- Searches -->
	<action    path="/search"
		type="net.spy.photo.struts.SearchAction"
		input="/search.jsp"
		name="searchForm">
		<forward name="success" path="/nextresults.do" />
	</action>

	<!-- Search result cursor movement -->
	<action    path="/nextresults"
		type="net.spy.photo.struts.CursorAction"
		name="cursorForm">
		<forward name="success" path="/results.jsp" />
	</action>

	<!-- Search result cursor movement -->
	<action    path="/listcomments"
		type="net.spy.photo.struts.ListCommentsAction">
		<forward name="success" path="/nextcomments.do" />
	</action>

	<!-- Search result cursor movement -->
	<action    path="/nextcomments"
		type="net.spy.photo.struts.CursorAction"
		name="cursorForm">
		<forward name="success" path="/comments.jsp" />
	</action>

	<!-- Image uploads -->
	<action path="/upload"
		type="net.spy.photo.struts.UploadAction"
		input="/addform.jsp"
		name="uploadForm">
		<forward name="success" path="/addform.jsp" />
	</action>

	<!-- Saving a search. -->
	<action path="/savesearch"
		type="net.spy.photo.struts.SaveSearchAction"
		name="saveSearchForm">
		<forward name="success" path="/savedsearch.jsp"/>
	</action>

	<!-- New user self-creation -->
	<action    path="/newuser"
		type="net.spy.photo.struts.NewUserAction"
		input="/newuserform.jsp"
		name="newUserForm">
		<forward name="success" path="/index.jsp" />
	</action>

	<!-- ***************************************************************** -->
	<!-- Admin stuff -->
	<!-- ***************************************************************** -->

	<!-- Managing users -->
	<action path="/admuseredit"
		name="adminUserForm"
		input="/admin/users.jsp"
		type="net.spy.photo.struts.AdminSelectUserAction">
		<forward name="success" path="/admin/edituser.jsp" />
	</action>

	<action path="/admusersave"
		name="adminUserForm"
		input="/admin/edituser.jsp"
		type="net.spy.photo.struts.AdminSaveUserAction">
		<forward name="success" path="/admin/users.jsp" />
	</action>

	<!-- Managing categories -->
	<action path="/admcatedit"
		name="adminCatForm"
		input="/admin/categories.jsp"
		type="net.spy.photo.struts.AdminSelectCatAction">
		<forward name="success" path="/admin/editcat.jsp" />
	</action>

	<action path="/admcatsave"
		name="adminCatForm"
		input="/admin/editcat.jsp"
		type="net.spy.photo.struts.AdminSaveCatAction">
		<forward name="success" path="/admin/categories.jsp" />
	</action>

	<!-- Creating a profile -->
	<action path="/admnewprofile"
		name="adminNewProfileForm"
		input="/admin/newprofile.jsp"
		type="net.spy.photo.struts.AdminSaveProfile">
		<forward name="success" path="/admin/newprofile.jsp" />
	</action>

	<!-- Modify an image's data -->
	<action path="/admeditimage"
		name="uploadForm"
		input="/displayAdmin.jsp"
		type="net.spy.photo.struts.AdminEditImage">
		<forward name="success" path="/displayAdmin.jsp"/>
	</action>

  </action-mappings>

</struts-config>
